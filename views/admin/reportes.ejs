<!DOCTYPE html>
<html lang="es">
<head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin â€” Reportes</title><link rel="stylesheet" href="/css/style.css"/></head>
<body>
  <%- include('../partials/navbar') %>
  <main class="container card">
    <%- include('../partials/admin_nav') %>
    <h1>Reportes</h1>
    <form method="get" class="row">
      <div class="col"><label>Desde</label><input class="input" type="date" name="desde" value="<%= desde || '' %>"/></div>
      <div class="col"><label>Hasta</label><input class="input" type="date" name="hasta" value="<%= hasta || '' %>"/></div>
      <div class="col"><button class="btn" style="margin-top:24px">Filtrar</button> <a class="btn ghost" href="/admin/reportes.csv">Exportar CSV</a></div>
    </form>
    <table>
      <thead><tr><th>Fecha</th><th>Producto</th><th class="right">Cantidad</th><th class="right">Precio</th><th class="right">Total</th></tr></thead>
      <tbody>
        <% ventas.forEach(v => { %>
          <tr>
            <td><%= new Date(v.fecha).toLocaleDateString('es-CL') %></td>
            <td><%= v.producto_nombre %></td>
            <td class="right"><%= v.cantidad %></td>
            <td class="right">$<%= v.precio_unit.toLocaleString('es-CL') %></td>
            <td class="right">$<%= v.total.toLocaleString('es-CL') %></td>
          </tr>
        <% }) %>
      </tbody>
      <tfoot><tr><th colspan="4" class="right">Total ventas</th><th class="right">$<%= total.toLocaleString('es-CL') %></th></tr></tfoot>
    </table>
  </main>
  <%- include('../partials/footer') %>
  <script src="/js/main.js"></script>
</body>
</html>
